(this["webpackJsonpreact-sweeper"]=this["webpackJsonpreact-sweeper"]||[]).push([[0],{12:function(e,n,r){"use strict";r.r(n);var t=r(2),a=r.n(t),c=r(6),i=r.n(c),s=r(1),u=r(3),o="EASY",d="MEDIUM",b="HARD",f="DIFFICULTY",l="RESET",v="CLICK_SQUARE",j="MARK_SQUARE",m="UPDATE_GRID",O="GAME_OVER",p="NEW_GAME";function h(e,n,r){return n.includes(e)||r[e].revealed||1===r[e].marked}function g(e,n,r){var t=[],a=[-1,0,1];return a.forEach((function(c){a.forEach((function(a){var i=e+(n*c+a);0===c&&c===a||i<0||i>=r.length||e%n===0&&-1===a||e%n===n-1&&1===a||t.push(i)}))})),t}function k(e){var n=Object(u.a)(e,2),r=n[0],t=n[1];return Array.from("0".repeat(r*t)).map((function(){return{revealed:!1,value:0,marked:0}}))}var x=r(0);var E=function(e){var n=e.squareData,r=n.value,t=n.revealed,a=n.marked,c=e.squareIndex,i=e.gameStatus,s=e.dispatch;return Object(x.jsxs)("button",{onClick:function(e){return s(e,{type:v,value:c})},onContextMenu:function(e){return s(e,{type:j,value:c})},className:"gridSquare "+(-2===r?"bomb":t&&r>=0?"nearby-".concat(r," revealed"):i.isGameOver&&a>0?r<0?"correct":"incorrect":""),disabled:i.isGameOver,children:[t&&r>0&&r,t&&r<0&&(0===a?"*":"M"),!t&&a>0&&(1===a?"M":"?")]})};var y=function(e){var n=e.gridOptions,r=e.gameStatus,t=e.dispatch,a=e.grid;function c(e,r,a,c){var o=a.dimensions,d=c.inProgress,b=d?r:function(e,n){var r=n.dimensions,t=n.bombs,a=k(r),c=Object(u.a)(r,2),i=c[0],s=c[1];return function(e,n,r){for(var t=[],a=0;a<e;a++){for(var c=-1;t.includes(c)||c<0||c===r;)c=Math.floor(Math.random()*n);t.push(c)}return t}(t,i*s,e).forEach((function(e){return a[e].value=-1})),a.forEach((function(e,n){e.value<0||(a[n].value=function(e,n,r){return g(e,n,r).reduce((function(e,n){return r[n].value<0?e+1:e}),0)}(n,i,a))})),a}(e,n),f=d?m:p;if(!b[e].revealed&&1!==b[e].marked){if(-1===b[e].value)return i(e);var l=function(e,n,r){for(var t=Object(u.a)(r,1)[0],a=[],c=[e];c.length;){var i=c.pop();h(i,a,n)||(0===n[i].value&&g(i,t,n).forEach((function(e){return c.push(e)})),n[i].revealed=!0,a.push(i))}return a}(e,Array.from(b),o);t({type:f,grid:b.map((function(e,n){return l.includes(n)?Object(s.a)(Object(s.a)({},e),{},{revealed:!0}):e}))})}}function i(e){t({type:O,grid:a.map((function(n,r){return n.value<0?r===e?Object(s.a)(Object(s.a)({},n),{},{value:-2,marked:0,revealed:!0}):Object(s.a)(Object(s.a)({},n),{},{revealed:!0}):n}))})}function o(e,i){e.preventDefault();var u=r.inProgress,o=r.isGameOver;switch(i.type){case v:c(i.value,a,n,r);break;case j:!o&&u&&function(e,n){if(!n[e].revealed){var r=n[e].marked+1;t({type:m,grid:n.map((function(n,t){return t===e?Object(s.a)(Object(s.a)({},n),{},{marked:r<3?r:0}):n}))})}}(i.value,a)}}return Object(x.jsx)("div",{className:"gridContainer",children:a.length>0&&Array.from(" ".repeat(n.dimensions[1])).map((function(e,t){return Object(x.jsx)("div",{className:"row",children:a.slice(t*n.dimensions[0],(t+1)*n.dimensions[0]).map((function(e,a){return Object(x.jsx)(E,{dispatch:o,squareData:e,squareIndex:a+t*n.dimensions[0],gameStatus:r},"row".concat(t," column").concat(a))}))},"row".concat(t))}))})};var S=function(e){var n=e.dispatch;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("select",{name:"difficulty",onChange:function(e){return n({type:f,value:e.target.value})},children:[Object(x.jsx)("option",{value:o,children:"Easy"}),Object(x.jsx)("option",{value:d,children:"Medium"}),Object(x.jsx)("option",{value:b,children:"Hard"})]}),Object(x.jsx)("button",{onClick:function(){return n({type:l})},children:"Reset"})]})};r(5);var w=function(){var e=Object(t.useState)({bombs:10,dimensions:[8,8]}),n=Object(u.a)(e,2),r=n[0],a=n[1],c=Object(t.useState)([]),i=Object(u.a)(c,2),v=i[0],j=i[1],h=Object(t.useState)({inProgress:!1,isGameOver:!1}),g=Object(u.a)(h,2),E=g[0],w=g[1],A=Object(t.useState)({revealed:0,marked:0}),C=Object(u.a)(A,2),M=C[0],P=C[1],G=Object(t.useCallback)((function(){return R()}),[]);function D(e){switch(e){case b:a({dimensions:[30,15],bombs:100});break;case d:a({dimensions:[15,15],bombs:64});break;case o:a({dimensions:[8,8],bombs:10});break;default:D(o)}}function I(e){switch(e.type){case p:j((function(){return e.grid})),w((function(e){return Object(s.a)(Object(s.a)({},e),{},{inProgress:!0})}));break;case m:j((function(){return e.grid}));break;case O:R(),j((function(){return e.grid}));break;case f:D(e.value);break;case l:j((function(){return k(r.dimensions)})),w((function(e){return Object(s.a)(Object(s.a)({},e),{},{inProgress:!1,isGameOver:!1})}))}}function R(){w((function(e){return Object(s.a)(Object(s.a)({},e),{},{inProgress:!1,isGameOver:!0})}))}return Object(t.useEffect)((function(){j((function(){return k(r.dimensions)})),w((function(e){return Object(s.a)(Object(s.a)({},e),{},{inProgress:!1,isGameOver:!1})}))}),[r]),Object(t.useEffect)((function(){if(E.inProgress){var e=v.reduce((function(e,n){return 1===n.marked?e+1:e}),0),n=v.reduce((function(e,n){return n.revealed?e+1:e}),0);P((function(r){return Object(s.a)(Object(s.a)({},r),{},{marked:e,revealed:n})})),n===r.dimensions[0]*r.dimensions[1]-r.bombs&&G()}}),[v,r,E,G]),Object(x.jsxs)("div",{className:"minesweeper",children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)(S,{dispatch:I}),"".concat(M.marked," bombs marked")]}),Object(x.jsx)(y,{gameStatus:E,gridOptions:r,dispatch:I,grid:v})]})};var A=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(w,{})})},C=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,13)).then((function(n){var r=n.getCLS,t=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;r(e),t(e),a(e),c(e),i(e)}))};i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root")),C()},5:function(e,n,r){}},[[12,1,2]]]);
//# sourceMappingURL=main.eb9b36b2.chunk.js.map